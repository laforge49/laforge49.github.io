<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>agent2.core documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Agent2 0.1.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>agent2</span></div></div></li><li class="depth-2 current"><a href="agent2.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="agent2.core.html#var-clear-ensure-response"><div class="inner"><span>clear-ensure-response</span></div></a></li><li class="depth-1"><a href="agent2.core.html#var-exception-reply"><div class="inner"><span>exception-reply</span></div></a></li><li class="depth-1"><a href="agent2.core.html#var-reduce-request-depth"><div class="inner"><span>reduce-request-depth</span></div></a></li><li class="depth-1"><a href="agent2.core.html#var-reply"><div class="inner"><span>reply</span></div></a></li><li class="depth-1"><a href="agent2.core.html#var-request"><div class="inner"><span>request</span></div></a></li><li class="depth-1"><a href="agent2.core.html#var-request-promise"><div class="inner"><span>request-promise</span></div></a></li><li class="depth-1"><a href="agent2.core.html#var-set-agent-value"><div class="inner"><span>set-agent-value</span></div></a></li><li class="depth-1"><a href="agent2.core.html#var-set-exception-handler"><div class="inner"><span>set-exception-handler</span></div></a></li><li class="depth-1"><a href="agent2.core.html#var-set-max-requests"><div class="inner"><span>set-max-requests</span></div></a></li><li class="depth-1"><a href="agent2.core.html#var-signal"><div class="inner"><span>signal</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">agent2.core</h2><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-clear-ensure-response"><h3>clear-ensure-response</h3><div class="usage"><code>(clear-ensure-response ctx-atom)</code></div><div class="doc"><pre class="plaintext">Clears the ensure-response flag:

ctx-atom - Holds the context map.</pre></div></div><div class="public anchor" id="var-exception-reply"><h3>exception-reply</h3><div class="usage"><code>(exception-reply ctx-atom exception)</code></div><div class="doc"><pre class="plaintext">Pass an exception to the source which invoked the request, if any:

     ctx-atom  - Holds the context map.
     exception - The exception.

Once reply or exception-reply is called, requests can not be sent, nor will
further responses be processed.

No response is sent if the current operating context is for a signal
rather than for a request. Rather, the exception is simply thrown.</pre></div></div><div class="public anchor" id="var-reduce-request-depth"><h3>reduce-request-depth</h3><div class="usage"><code>(reduce-request-depth ctx-atom new-request-depth)</code></div><div class="doc"><pre class="plaintext">Set request-depth to a smaller value:

     ctx-atom - Holds the context map.
     new-request-depth - The smaller value.

Default value is Integer/MAX_VALUE.</pre></div></div><div class="public anchor" id="var-reply"><h3>reply</h3><div class="usage"><code>(reply ctx-atom v)</code></div><div class="doc"><pre class="plaintext">Reply to a request:

     ctx-atom - Holds the context map.
     v        - The response.

No response is sent if the operating context is for a signal rather
than for a request or request-promise.

Once reply or exception-reply is called, requests can not be sent, nor will
further responses be processed.</pre></div></div><div class="public anchor" id="var-request"><h3>request</h3><div class="usage"><code>(request ctx-atom ag f args fr)</code></div><div class="doc"><pre class="plaintext">A 2-way message exchange to operate on an agent and get a reply
  without blocking:

     ag   - The agent to be operated on.
     f    - The function which operates on the agent.
     args - Arguments to be passed to f. May be ().
     fr   - The callback function which processes the
             response.

The f function takes the target agent&apos;s value as its first argument,
an atom holding the context map as its second argument and
args as the remaining arguments. Its return value is ignored.
Use the set-agent-value function to update the state of
the agent. A response is returned by calling the reply function.

The fr function takes one argument,
the response returned by the reply function. This function is called
within the threading context of the agent which invoked the request. But
processing is asynchronous and there is no thread blocking. Rather, the
processing of requests and responses are interleaved. Isolation then
is an issue that must be managed by the application.</pre></div></div><div class="public anchor" id="var-request-promise"><h3>request-promise</h3><div class="usage"><code>(request-promise ag f &amp; args)</code></div><div class="doc"><pre class="plaintext">Sends a function to an agent and returns a promise for the result:

     ag   - The target agent.
     f    - The function passed to the agent.
     args - Arguments passed to the function.

The function f is invoked with the target agent&apos;s value and an
atom holding the context map pre-pended to its list of args.</pre></div></div><div class="public anchor" id="var-set-agent-value"><h3>set-agent-value</h3><div class="usage"><code>(set-agent-value ctx-atom agent-value)</code></div><div class="doc"><pre class="plaintext">Change the subsequent value of the agent:

ctx-atom - Holds the context map.
agent-value - The new agent value.</pre></div></div><div class="public anchor" id="var-set-exception-handler"><h3>set-exception-handler</h3><div class="usage"><code>(set-exception-handler ctx-atom exception-handler)</code></div><div class="doc"><pre class="plaintext">Assign an exception handler to the context map of the agent:

   ctx-atom - Holds the context map.
   exception-handler - The new exception handler function.

The exception handler function takes one argument:

   exception - The exception thrown.</pre></div></div><div class="public anchor" id="var-set-max-requests"><h3>set-max-requests</h3><div class="usage"><code>(set-max-requests ctx-atom max-requests)</code></div><div class="doc"><pre class="plaintext">Set the maximum number of requests that can be sent:

ctx-atom - Holds the context map.
max-requests - The limit before an exception is thrown.</pre></div></div><div class="public anchor" id="var-signal"><h3>signal</h3><div class="usage"><code>(signal ag f &amp; args)</code></div><div class="doc"><pre class="plaintext">A 1-way message to operate on an agent.

     ag   - The agent to be operated on.
     f    - The function to operate on the agent.
     args - Optional arguments to f.

The f function takes the target agent&apos;s value as its first argument,
an atom holding the context map as the second argument and
args as the remaining arguments. Its return value is ignored.
Use the set-agent-value function to update the value of the agent.</pre></div></div></div></body></html>